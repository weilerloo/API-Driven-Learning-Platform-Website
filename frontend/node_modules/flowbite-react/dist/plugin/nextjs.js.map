{"version":3,"file":"nextjs.js","sources":["../../src/plugin/nextjs.ts"],"sourcesContent":["import type { NextConfig } from \"next\";\nimport { PHASE_DEVELOPMENT_SERVER, PHASE_PRODUCTION_BUILD } from \"next/constants.js\";\nimport { build } from \"../cli/commands/build\";\nimport { dev } from \"../cli/commands/dev\";\n\ninterface ConfigurationOptions {\n  defaultConfig: NextConfig;\n}\n\ntype ConfigurationCallback = (phase: string, options: ConfigurationOptions) => NextConfig | Promise<NextConfig>;\n\nlet devRan = false;\nlet buildRan = false;\n\nexport default function withFlowbiteReact(nextConfig: NextConfig | ConfigurationCallback = {}): ConfigurationCallback {\n  return async (phase: string, options: ConfigurationOptions) => {\n    if (phase === PHASE_DEVELOPMENT_SERVER && !devRan) {\n      devRan = true;\n      dev();\n    }\n    if (phase === PHASE_PRODUCTION_BUILD && !buildRan) {\n      buildRan = true;\n      build();\n    }\n\n    const userConfig = typeof nextConfig === \"function\" ? await nextConfig(phase, options) : nextConfig;\n\n    return patchConfig(userConfig);\n  };\n}\n\nfunction patchConfig(config: NextConfig): NextConfig {\n  const experimental = config.experimental || {};\n  const optimizePackageImports = experimental.optimizePackageImports || [];\n\n  return {\n    ...config,\n    experimental: {\n      ...experimental,\n      optimizePackageImports: [...optimizePackageImports, \"flowbite-react\"],\n    },\n  };\n}\n"],"names":[],"mappings":";;;;AAIA,IAAI,MAAM,GAAG,KAAK;AAClB,IAAI,QAAQ,GAAG,KAAK;AACL,SAAS,iBAAiB,CAAC,UAAU,GAAG,EAAE,EAAE;AAC3D,EAAE,OAAO,OAAO,KAAK,EAAE,OAAO,KAAK;AACnC,IAAI,IAAI,KAAK,KAAK,wBAAwB,IAAI,CAAC,MAAM,EAAE;AACvD,MAAM,MAAM,GAAG,IAAI;AACnB,MAAM,GAAG,EAAE;AACX;AACA,IAAI,IAAI,KAAK,KAAK,sBAAsB,IAAI,CAAC,QAAQ,EAAE;AACvD,MAAM,QAAQ,GAAG,IAAI;AACrB,MAAM,KAAK,EAAE;AACb;AACA,IAAI,MAAM,UAAU,GAAG,OAAO,UAAU,KAAK,UAAU,GAAG,MAAM,UAAU,CAAC,KAAK,EAAE,OAAO,CAAC,GAAG,UAAU;AACvG,IAAI,OAAO,WAAW,CAAC,UAAU,CAAC;AAClC,GAAG;AACH;AACA,SAAS,WAAW,CAAC,MAAM,EAAE;AAC7B,EAAE,MAAM,YAAY,GAAG,MAAM,CAAC,YAAY,IAAI,EAAE;AAChD,EAAE,MAAM,sBAAsB,GAAG,YAAY,CAAC,sBAAsB,IAAI,EAAE;AAC1E,EAAE,OAAO;AACT,IAAI,GAAG,MAAM;AACb,IAAI,YAAY,EAAE;AAClB,MAAM,GAAG,YAAY;AACrB,MAAM,sBAAsB,EAAE,CAAC,GAAG,sBAAsB,EAAE,gBAAgB;AAC1E;AACA,GAAG;AACH;;;;"}