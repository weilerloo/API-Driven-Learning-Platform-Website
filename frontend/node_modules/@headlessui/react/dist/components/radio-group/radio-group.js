"use client";import{useFocusRing as Z}from"@react-aria/focus";import{useHover as ee}from"@react-aria/interactions";import E,{createContext as te,useCallback as ge,useContext as oe,useMemo as w,useReducer as Oe,useRef as B}from"react";import{useByComparator as Pe}from'../../hooks/use-by-comparator.js';import{useControllable as ve}from'../../hooks/use-controllable.js';import{useDefaultValue as De}from'../../hooks/use-default-value.js';import{useEvent as M}from'../../hooks/use-event.js';import{useId as V}from'../../hooks/use-id.js';import{useIsoMorphicEffect as re}from'../../hooks/use-iso-morphic-effect.js';import{useLatestValue as ne}from'../../hooks/use-latest-value.js';import{useSlot as K}from'../../hooks/use-slot.js';import{useSyncRefs as $}from'../../hooks/use-sync-refs.js';import{useDisabled as ie}from'../../internal/disabled.js';import{FormFields as Ae}from'../../internal/form-fields.js';import{useProvidedId as _e}from'../../internal/id.js';import{isDisabledReactIssue7711 as ae}from'../../utils/bugs.js';import{Focus as N,FocusResult as pe,focusIn as le,sortByDomNode as Ee}from'../../utils/focus-management.js';import{attemptSubmit as Ge}from'../../utils/form.js';import{match as xe}from'../../utils/match.js';import{getOwnerDocument as Ce}from'../../utils/owner.js';import{forwardRefWithAs as j,mergeProps as se,useRender as J}from'../../utils/render.js';import{Description as he,useDescribedBy as Le,useDescriptions as de}from'../description/description.js';import{Keys as L}from'../keyboard.js';import{Label as ke,useLabelledBy as Ie,useLabels as ue}from'../label/label.js';var Fe=(e=>(e[e.RegisterOption=0]="RegisterOption",e[e.UnregisterOption=1]="UnregisterOption",e))(Fe||{});let Ue={[0](o,t){let e=[...o.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...o,options:Ee(e,n=>n.element.current)}},[1](o,t){let e=o.options.slice(),n=o.options.findIndex(v=>v.id===t.id);return n===-1?o:(e.splice(n,1),{...o,options:e})}},X=te(null);X.displayName="RadioGroupDataContext";function z(o){let t=oe(X);if(t===null){let e=new Error(`<${o} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,z),e}return t}let q=te(null);q.displayName="RadioGroupActionsContext";function Q(o){let t=oe(q);if(t===null){let e=new Error(`<${o} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,Q),e}return t}function Se(o,t){return xe(t.type,Ue,o,t)}let Me="div";function He(o,t){let e=V(),n=ie(),{id:v=`headlessui-radiogroup-${e}`,value:R,form:D,name:i,onChange:c,by:u,disabled:a=n||!1,defaultValue:k,tabIndex:f=0,...I}=o,T=Pe(u),[A,y]=Oe(Se,{options:[]}),p=A.options,[F,G]=ue(),[U,S]=de(),x=B(null),m=$(x,t),b=De(k),[s,C]=ve(R,c,b),g=w(()=>p.find(r=>!r.propsRef.current.disabled),[p]),O=w(()=>p.some(r=>T(r.propsRef.current.value,s)),[p,s]),l=M(r=>{var d;if(a||T(r,s))return!1;let h=(d=p.find(H=>T(H.propsRef.current.value,r)))==null?void 0:d.propsRef.current;return h!=null&&h.disabled?!1:(C==null||C(r),!0)}),ce=M(r=>{let h=x.current;if(!h)return;let d=Ce(h),H=p.filter(P=>P.propsRef.current.disabled===!1).map(P=>P.element.current);switch(r.key){case L.Enter:Ge(r.currentTarget);break;case L.ArrowLeft:case L.ArrowUp:if(r.preventDefault(),r.stopPropagation(),le(H,N.Previous|N.WrapAround)===pe.Success){let _=p.find(W=>W.element.current===(d==null?void 0:d.activeElement));_&&l(_.propsRef.current.value)}break;case L.ArrowRight:case L.ArrowDown:if(r.preventDefault(),r.stopPropagation(),le(H,N.Next|N.WrapAround)===pe.Success){let _=p.find(W=>W.element.current===(d==null?void 0:d.activeElement));_&&l(_.propsRef.current.value)}break;case L.Space:{r.preventDefault(),r.stopPropagation();let P=p.find(_=>_.element.current===(d==null?void 0:d.activeElement));P&&l(P.propsRef.current.value)}break}}),Y=M(r=>(y({type:0,...r}),()=>y({type:1,id:r.id}))),fe=w(()=>({value:s,firstOption:g,containsCheckedOption:O,disabled:a,compare:T,tabIndex:f,...A}),[s,g,O,a,T,f,A]),Te=w(()=>({registerOption:Y,change:l}),[Y,l]),me={ref:m,id:v,role:"radiogroup","aria-labelledby":F,"aria-describedby":U,onKeyDown:ce},Re=K({value:s}),ye=ge(()=>{if(b!==void 0)return l(b)},[l,b]),be=J();return E.createElement(S,{name:"RadioGroup.Description"},E.createElement(G,{name:"RadioGroup.Label"},E.createElement(q.Provider,{value:Te},E.createElement(X.Provider,{value:fe},i!=null&&E.createElement(Ae,{disabled:a,data:{[i]:s||"on"},overrides:{type:"radio",checked:s!=null},form:D,onReset:ye}),be({ourProps:me,theirProps:I,slot:Re,defaultTag:Me,name:"RadioGroup"})))))}let we="div";function Ne(o,t){var g;let e=z("RadioGroup.Option"),n=Q("RadioGroup.Option"),v=V(),{id:R=`headlessui-radiogroup-option-${v}`,value:D,disabled:i=e.disabled||!1,autoFocus:c=!1,...u}=o,a=B(null),k=$(a,t),[f,I]=ue(),[T,A]=de(),y=ne({value:D,disabled:i});re(()=>n.registerOption({id:R,element:a,propsRef:y}),[R,n,a,y]);let p=M(O=>{var l;if(ae(O.currentTarget))return O.preventDefault();n.change(D)&&((l=a.current)==null||l.focus())}),F=((g=e.firstOption)==null?void 0:g.id)===R,{isFocusVisible:G,focusProps:U}=Z({autoFocus:c}),{isHovered:S,hoverProps:x}=ee({isDisabled:i}),m=e.compare(e.value,D),b=se({ref:k,id:R,role:"radio","aria-checked":m?"true":"false","aria-labelledby":f,"aria-describedby":T,"aria-disabled":i?!0:void 0,tabIndex:(()=>i?-1:m||!e.containsCheckedOption&&F?e.tabIndex:-1)(),onClick:i?void 0:p,autoFocus:c},U,x),s=K({checked:m,disabled:i,active:G,hover:S,focus:G,autofocus:c}),C=J();return E.createElement(A,{name:"RadioGroup.Description"},E.createElement(I,{name:"RadioGroup.Label"},C({ourProps:b,theirProps:u,slot:s,defaultTag:we,name:"RadioGroup.Option"})))}let We="span";function Be(o,t){var g;let e=z("Radio"),n=Q("Radio"),v=V(),R=_e(),D=ie(),{id:i=R||`headlessui-radio-${v}`,value:c,disabled:u=e.disabled||D||!1,autoFocus:a=!1,...k}=o,f=B(null),I=$(f,t),T=Ie(),A=Le(),y=ne({value:c,disabled:u});re(()=>n.registerOption({id:i,element:f,propsRef:y}),[i,n,f,y]);let p=M(O=>{var l;if(ae(O.currentTarget))return O.preventDefault();n.change(c)&&((l=f.current)==null||l.focus())}),{isFocusVisible:F,focusProps:G}=Z({autoFocus:a}),{isHovered:U,hoverProps:S}=ee({isDisabled:u}),x=((g=e.firstOption)==null?void 0:g.id)===i,m=e.compare(e.value,c),b=se({ref:I,id:i,role:"radio","aria-checked":m?"true":"false","aria-labelledby":T,"aria-describedby":A,"aria-disabled":u?!0:void 0,tabIndex:(()=>u?-1:m||!e.containsCheckedOption&&x?e.tabIndex:-1)(),autoFocus:a,onClick:u?void 0:p},G,S),s=K({checked:m,disabled:u,hover:U,focus:F,autofocus:a});return J()({ourProps:b,theirProps:k,slot:s,defaultTag:We,name:"Radio"})}let Ve=j(He),Ke=j(Ne),$e=j(Be),je=ke,Je=he,bt=Object.assign(Ve,{Option:Ke,Radio:$e,Label:je,Description:Je});export{$e as Radio,bt as RadioGroup,Je as RadioGroupDescription,je as RadioGroupLabel,Ke as RadioGroupOption};
